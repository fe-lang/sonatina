#! evm.case: ok
#!   calldata: u32be(11) u32be(22)
#!   expect: return u256(222)

target = "evm-ethereum-osaka"

func public %escape(v0.*i8) {
    block0:
        v1.i256 = ptr_to_int v0 i256;
        mstore 0.i32 v1 i256;
        return;
}

func public %main() -> i256 {
    block0:
        v0.*i8 = evm_malloc 32.i256;
        v1.*i256 = bitcast v0 *i256;
        mstore v1 111.i256 i256;

        v2.*i256 = alloca i256;
        v3.i256 = ptr_to_int v0 i256;
        mstore v2 v3 i256;

        v4.*i256 = alloca i256;
        evm_mcopy v4 v2 32.i256;

        v5.i256 = mload v4 i256;
        v6.*i8 = int_to_ptr v5 *i8;
        call %escape v6;

        v7.*i8 = evm_malloc 32.i256;
        v8.*i256 = bitcast v7 *i256;
        mstore v8 222.i256 i256;

        v9.i256 = mload 0.i32 i256;
        v10.*i8 = int_to_ptr v9 *i8;
        v11.*i256 = bitcast v10 *i256;
        v12.i256 = mload v11 i256;
        return v12;
}

func public %entry() {
    block0:
        v0.i256 = call %main;
        mstore 0.i32 v0 i256;
        evm_return 0.i8 32.i8;
}

object @Contract {
  section runtime {
    entry %entry;
  }
}
