---
source: crates/codegen/tests/evm.rs
assertion_line: 178
expression: "String::from_utf8(v).unwrap()"
input_file: test_files/evm/malloc_path_sensitive.sntn
---
// func public %big() -> i256
  block0 P=[] T=[]
    - stack=[<RET>]
      alloca [] -> v0
    - stack=[v0, <RET>], last_use=[v0]
      pre: [PUSH(0), PUSH(0), SWAP1, SWAP2]
      gep [v0, 0, 0] -> v1
    - stack=[v1, <RET>]
      pre: [PUSH(I256 { is_negative: false, abs: 1 }), DUP2]
      mstore [v1, I256 { is_negative: false, abs: 1 }]
    - stack=[v1, <RET>], last_use=[v1]
      mload [v1] -> v2
    - stack=[v2, <RET>]
      return [v2]

// func public %small() -> i256
  block0 P=[] T=[]
    - stack=[<RET>]
      return: [PUSH(I256 { is_negative: false, abs: 2 })]
      return [I256 { is_negative: false, abs: 2 }]

// func public %dispatch(v0.i1) -> i256
  block0 P=[v0] T=[]
    - stack=[v0, <RET>]
      br [v0] -> [block1, block2]
  block1 P=[] T=[]
    inherited from block0: [<RET>]
    - stack=[<RET>]
      pre: [PUSH(I256 { is_negative: false, abs: 32 })]
      evm_malloc [I256 { is_negative: false, abs: 32 }] -> v1
    - stack=[v1x, <RET>]
      cleanup: [POP]
      pre: [PUSH_CONT]
      call [] -> v2
    - stack=[v2, <RET>]
      return [v2]
  block2 P=[] T=[]
    inherited from block0: [<RET>]
    - stack=[<RET>]
      pre: [PUSH(I256 { is_negative: false, abs: 32 })]
      evm_malloc [I256 { is_negative: false, abs: 32 }] -> v3
    - stack=[v3x, <RET>]
      cleanup: [POP]
      pre: [PUSH_CONT]
      call [] -> v4
    - stack=[v4, <RET>]
      return [v4]

// func public %entry()
  block0 P=[] T=[]
    - stack=[]
      pre: [PUSH_CONT, PUSH(true)]
      call [true] -> v0
    - stack=[v0], last_use=[v0]
      pre: [PUSH(0)]
      mstore [0, v0]
    - stack=[]
      pre: [PUSH(32), PUSH(0)]
      evm_return [0, 32]

// func public %big() -> i256
big:
  block0:
    JUMPDEST
    PUSH1 0xc0 (192)  // v0.*@big = alloca @big;
    PUSH0  // v1.*i256 = gep v0 0.i8 0.i8;
    PUSH0
    SWAP1
    SWAP2
    SWAP1
    POP
    SWAP1
    POP
    PUSH1 0x1 (1)  // mstore v1 1.i256 i256;
    DUP2
    MSTORE
    MLOAD  // v2.i256 = mload v1 i256;
    SWAP1  // return v2;
    JUMP

// func public %small() -> i256
small:
  block0:
    JUMPDEST
    PUSH1 0x2 (2)  // return 2.i256;
    SWAP1
    JUMP

// func public %dispatch(v0.i1) -> i256
dispatch:
  block0:
    JUMPDEST
    ISZERO  // br v0 block1 block2;
    PUSH1 block2
    JUMPI
  block1:
    JUMPDEST
    PUSH1 0x20 (32)  // v1.*i8 = evm_malloc 32.i256;
    PUSH1 0x1f (31)
    ADD
    PUSH1 0x20 (32)
    DIV
    PUSH1 0x20 (32)
    MUL
    PUSH1 0x40 (64)
    MLOAD
    PUSH1 0x80 (128)
    MLOAD
    DUP2
    DUP2
    GT
    PUSH1 `pc + (5)`
    JUMPI
    POP
    PUSH1 `pc + (5)`
    JUMP
    JUMPDEST
    SWAP1
    POP
    JUMPDEST
    PUSH2 0x1c0 (448)
    DUP2
    DUP2
    GT
    PUSH1 `pc + (5)`
    JUMPI
    POP
    PUSH1 `pc + (5)`
    JUMP
    JUMPDEST
    SWAP1
    POP
    JUMPDEST
    DUP1
    SWAP2
    ADD
    PUSH1 0x40 (64)
    MSTORE
    POP  // v2.i256 = call %big;
    PUSH1 `pc + (3)`
    PUSH1 FuncRef(0)
    JUMP
    JUMPDEST
    SWAP1  // return v2;
    JUMP
  block2:
    JUMPDEST
    PUSH1 0x20 (32)  // v3.*i8 = evm_malloc 32.i256;
    PUSH1 0x1f (31)
    ADD
    PUSH1 0x20 (32)
    DIV
    PUSH1 0x20 (32)
    MUL
    PUSH1 0x40 (64)
    MLOAD
    PUSH1 0x80 (128)
    MLOAD
    DUP2
    DUP2
    GT
    PUSH1 `pc + (5)`
    JUMPI
    POP
    PUSH1 `pc + (5)`
    JUMP
    JUMPDEST
    SWAP1
    POP
    JUMPDEST
    PUSH1 0xc0 (192)
    DUP2
    DUP2
    GT
    PUSH1 `pc + (5)`
    JUMPI
    POP
    PUSH1 `pc + (5)`
    JUMP
    JUMPDEST
    SWAP1
    POP
    JUMPDEST
    DUP1
    SWAP2
    ADD
    PUSH1 0x40 (64)
    MSTORE
    POP  // v4.i256 = call %small;
    PUSH1 `pc + (3)`
    PUSH1 FuncRef(1)
    JUMP
    JUMPDEST
    SWAP1  // return v4;
    JUMP

// func public %entry()
entry:
  block0:
    JUMPDEST
    PUSH1 `pc + (6)`  // v0.i256 = call %dispatch 1.i1;
    PUSH1 0x1 (1)
    PUSH0
    SIGNEXTEND
    PUSH1 FuncRef(2)
    JUMP
    JUMPDEST
    PUSH0  // mstore 0.i32 v0 i256;
    MSTORE
    PUSH1 0x20 (32)  // evm_return 0.i8 32.i8;
    PUSH0
    RETURN



---------------

// section runtime
0x5b5f6060526101c0604052601460015f0b601b565b5f5260205ff35b156060575b6020601f01602004602002604051608051818111603c5750603f565b90505b6101c0818111604d57506050565b90505b80910160405250605d609f565b90565b6020601f01602004602002604051608051818111607c5750607f565b90505b60c0818111608c5750608f565b90505b80910160405250609c60b1565b90565b60c05f5f909190509050600181525190565b60029056


Success { reason: Return, gas_used: 21350, gas_refunded: 0, logs: [], output: Call(0x0000000000000000000000000000000000000000000000000000000000000001) }

    pc  opcode            input (stack grows to the right)
     0  5b  JUMPDEST      []
     1  5f  PUSH0         []
     2  60  PUSH1         0x60  [0x0]
     4  52  MSTORE        [0x0, 0x60]
     5  61  PUSH2         0x01c0  []
     8  60  PUSH1         0x40  [0x1c0]
    10  52  MSTORE        [0x1c0, 0x40]
    11  60  PUSH1         0x14  []
    13  60  PUSH1         0x01  [0x14]
    15  5f  PUSH0         [0x14, 0x1]
    16  0b  SIGNEXTEND    [0x14, 0x1, 0x0]
    17  60  PUSH1         0x1b  [0x14, 0x1]
    19  56  JUMP          [0x14, 0x1, 0x1b]
    27  5b  JUMPDEST      [0x14, 0x1]
    28  15  ISZERO        [0x14, 0x1]
    29  60  PUSH1         0x60  [0x14, 0x0]
    31  57  JUMPI         [0x14, 0x0, 0x60]
    32  5b  JUMPDEST      [0x14]
    33  60  PUSH1         0x20  [0x14]
    35  60  PUSH1         0x1f  [0x14, 0x20]
    37  01  ADD           [0x14, 0x20, 0x1f]
    38  60  PUSH1         0x20  [0x14, 0x3f]
    40  04  DIV           [0x14, 0x3f, 0x20]
    41  60  PUSH1         0x20  [0x14, 0x0]
    43  02  MUL           [0x14, 0x0, 0x20]
    44  60  PUSH1         0x40  [0x14, 0x0]
    46  51  MLOAD         [0x14, 0x0, 0x40]
    47  60  PUSH1         0x80  [0x14, 0x0, 0x1c0]
    49  51  MLOAD         [0x14, 0x0, 0x1c0, 0x80]
    50  81  DUP2          [0x14, 0x0, 0x1c0, 0x0]
    51  81  DUP2          [0x14, 0x0, 0x1c0, 0x0, 0x1c0]
    52  11  GT            [0x14, 0x0, 0x1c0, 0x0, 0x1c0, 0x0]
    53  60  PUSH1         0x3c  [0x14, 0x0, 0x1c0, 0x0, 0x0]
    55  57  JUMPI         [0x14, 0x0, 0x1c0, 0x0, 0x0, 0x3c]
    56  50  POP           [0x14, 0x0, 0x1c0, 0x0]
    57  60  PUSH1         0x3f  [0x14, 0x0, 0x1c0]
    59  56  JUMP          [0x14, 0x0, 0x1c0, 0x3f]
    63  5b  JUMPDEST      [0x14, 0x0, 0x1c0]
    64  61  PUSH2         0x01c0  [0x14, 0x0, 0x1c0]
    67  81  DUP2          [0x14, 0x0, 0x1c0, 0x1c0]
    68  81  DUP2          [0x14, 0x0, 0x1c0, 0x1c0, 0x1c0]
    69  11  GT            [0x14, 0x0, 0x1c0, 0x1c0, 0x1c0, 0x1c0]
    70  60  PUSH1         0x4d  [0x14, 0x0, 0x1c0, 0x1c0, 0x0]
    72  57  JUMPI         [0x14, 0x0, 0x1c0, 0x1c0, 0x0, 0x4d]
    73  50  POP           [0x14, 0x0, 0x1c0, 0x1c0]
    74  60  PUSH1         0x50  [0x14, 0x0, 0x1c0]
    76  56  JUMP          [0x14, 0x0, 0x1c0, 0x50]
    80  5b  JUMPDEST      [0x14, 0x0, 0x1c0]
    81  80  DUP1          [0x14, 0x0, 0x1c0]
    82  91  SWAP2         [0x14, 0x0, 0x1c0, 0x1c0]
    83  01  ADD           [0x14, 0x1c0, 0x1c0, 0x0]
    84  60  PUSH1         0x40  [0x14, 0x1c0, 0x1c0]
    86  52  MSTORE        [0x14, 0x1c0, 0x1c0, 0x40]
    87  50  POP           [0x14, 0x1c0]
    88  60  PUSH1         0x5d  [0x14]
    90  60  PUSH1         0x9f  [0x14, 0x5d]
    92  56  JUMP          [0x14, 0x5d, 0x9f]
   159  5b  JUMPDEST      [0x14, 0x5d]
   160  60  PUSH1         0xc0  [0x14, 0x5d]
   162  5f  PUSH0         [0x14, 0x5d, 0xc0]
   163  5f  PUSH0         [0x14, 0x5d, 0xc0, 0x0]
   164  90  SWAP1         [0x14, 0x5d, 0xc0, 0x0, 0x0]
   165  91  SWAP2         [0x14, 0x5d, 0xc0, 0x0, 0x0]
   166  90  SWAP1         [0x14, 0x5d, 0x0, 0x0, 0xc0]
   167  50  POP           [0x14, 0x5d, 0x0, 0xc0, 0x0]
   168  90  SWAP1         [0x14, 0x5d, 0x0, 0xc0]
   169  50  POP           [0x14, 0x5d, 0xc0, 0x0]
   170  60  PUSH1         0x01  [0x14, 0x5d, 0xc0]
   172  81  DUP2          [0x14, 0x5d, 0xc0, 0x1]
   173  52  MSTORE        [0x14, 0x5d, 0xc0, 0x1, 0xc0]
   174  51  MLOAD         [0x14, 0x5d, 0xc0]
   175  90  SWAP1         [0x14, 0x5d, 0x1]
   176  56  JUMP          [0x14, 0x1, 0x5d]
    93  5b  JUMPDEST      [0x14, 0x1]
    94  90  SWAP1         [0x14, 0x1]
    95  56  JUMP          [0x1, 0x14]
    20  5b  JUMPDEST      [0x1]
    21  5f  PUSH0         [0x1]
    22  52  MSTORE        [0x1, 0x0]
    23  60  PUSH1         0x20  []
    25  5f  PUSH0         [0x20]
    26  f3  RETURN        [0x20, 0x0]
