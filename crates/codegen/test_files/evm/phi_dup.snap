---
source: crates/codegen/tests/evm.rs
expression: "String::from_utf8(v).unwrap()"
input_file: test_files/evm/phi_dup.sntn
---
// func public %entry()
  block0 P=[] T=[]
    - stack=[]
      pre: [PUSH(0)]
      evm_calldata_load [0] -> v0
    - stack=[v0], last_use=[v0]
      pre: [PUSH(224)]
      shr [224, v0] -> v1
    - stack=[v1]
      pre: [PUSH(0), DUP2]
      gt [v1, 0] -> v2
    - stack=[v2, v1]
      br [v2] -> [block1, block2]
  block1 P=[] T=[v1]
    inherited from block0: [v1]
    - stack=[v1], last_use=[v1]
      pre: [PUSH(1)]
      add [1, v1] -> v3
    - stack=[v3]
      exit(block3): [DUP1, SWAP1]
      jump -> block3
  block2 P=[] T=[v1]
    inherited from block0: [v1]
    - stack=[v1], last_use=[v1]
      pre: [PUSH(2)]
      add [2, v1] -> v4
    - stack=[v4]
      exit(block3): [DUP1, SWAP1]
      jump -> block3
  block3 P=[v5, v6] T=[]
    - stack=[v5, v6], last_use=[v5, v6]
      add [v5, v6] -> v7
    - stack=[v7], last_use=[v7]
      pre: [PUSH(0)]
      mstore [0, v7]
    - stack=[]
      pre: [PUSH(4), PUSH(0)]
      evm_return [0, 4]

// func public %entry()
entry:
  block0:
    JUMPDEST
    PUSH0  // v0.i256 = evm_calldata_load 0.i32;
    CALLDATALOAD
    PUSH1 0xe0 (224)  // v1.i32 = shr 224.i32 v0;
    SHR
    PUSH0  // v2.i1 = gt v1 0.i32;
    DUP2
    GT
    ISZERO  // br v2 block1 block2;
    PUSH1 block2
    JUMPI
  block1:
    JUMPDEST
    PUSH1 0x1 (1)  // v3.i32 = add v1 1.i32;
    ADD
    DUP1  // jump block3;
    SWAP1
    PUSH1 block3
    JUMP
  block2:
    JUMPDEST
    PUSH1 0x2 (2)  // v4.i32 = add v1 2.i32;
    ADD
    DUP1  // jump block3;
    SWAP1
  block3:
    JUMPDEST
    ADD  // v7.i32 = add v5 v6;
    PUSH0  // mstore 0.i32 v7 i32;
    SWAP1
    PUSH1 0xe0 (224)
    SHL
    SWAP1
    MSTORE
    PUSH1 0x4 (4)  // evm_return 0.i8 4.i8;
    PUSH0
    RETURN



---------------

// func public %entry()
entry:
  block0:
    0    JUMPDEST
    1    PUSH0  // v0.i256 = evm_calldata_load 0.i32;
    2    CALLDATALOAD
    3    PUSH1 0xe0 (224)  // v1.i32 = shr 224.i32 v0;
    5    SHR
    6    PUSH0  // v2.i1 = gt v1 0.i32;
    7    DUP2
    8    GT
    9    ISZERO  // br v2 block1 block2;
   10    PUSH1 22 (block2)
   12    JUMPI
  block1:
   13    JUMPDEST
   14    PUSH1 0x1 (1)  // v3.i32 = add v1 1.i32;
   16    ADD
   17    DUP1  // jump block3;
   18    SWAP1
   19    PUSH1 28 (block3)
   21    JUMP
  block2:
   22    JUMPDEST
   23    PUSH1 0x2 (2)  // v4.i32 = add v1 2.i32;
   25    ADD
   26    DUP1  // jump block3;
   27    SWAP1
  block3:
   28    JUMPDEST
   29    ADD  // v7.i32 = add v5 v6;
   30    PUSH0  // mstore 0.i32 v7 i32;
   31    SWAP1
   32    PUSH1 0xe0 (224)
   34    SHL
   35    SWAP1
   36    MSTORE
   37    PUSH1 0x4 (4)  // evm_return 0.i8 4.i8;
   39    PUSH0
   40    RETURN

0x5b5f3560e01c5f8111156016575b6001018090601c565b60020180905b015f9060e01b905260045ff3

Success { reason: Return, gas_used: 21145, gas_refunded: 0, logs: [], output: Call(0x00000018) }

    pc  opcode            input (stack grows to the right)
     0  5b  JUMPDEST      []
     1  5f  PUSH0         []
     2  35  CALLDATALOAD  [0x0]
     3  60  PUSH1         0xe0  [0xb00000016000000000000000000000000000000000000000000000000]
     5  1c  SHR           [0xb00000016000000000000000000000000000000000000000000000000, 0xe0]
     6  5f  PUSH0         [0xb]
     7  81  DUP2          [0xb, 0x0]
     8  11  GT            [0xb, 0x0, 0xb]
     9  15  ISZERO        [0xb, 0x1]
    10  60  PUSH1         0x16  [0xb, 0x0]
    12  57  JUMPI         [0xb, 0x0, 0x16]
    13  5b  JUMPDEST      [0xb]
    14  60  PUSH1         0x01  [0xb]
    16  01  ADD           [0xb, 0x1]
    17  80  DUP1          [0xc]
    18  90  SWAP1         [0xc, 0xc]
    19  60  PUSH1         0x1c  [0xc, 0xc]
    21  56  JUMP          [0xc, 0xc, 0x1c]
    28  5b  JUMPDEST      [0xc, 0xc]
    29  01  ADD           [0xc, 0xc]
    30  5f  PUSH0         [0x18]
    31  90  SWAP1         [0x18, 0x0]
    32  60  PUSH1         0xe0  [0x0, 0x18]
    34  1b  SHL           [0x0, 0x18, 0xe0]
    35  90  SWAP1         [0x0, 0x1800000000000000000000000000000000000000000000000000000000]
    36  52  MSTORE        [0x1800000000000000000000000000000000000000000000000000000000, 0x0]
    37  60  PUSH1         0x04  []
    39  5f  PUSH0         [0x4]
    40  f3  RETURN        [0x4, 0x0]
